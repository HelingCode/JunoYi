# JunoYi å¿«é€Ÿå‚è€ƒæ‰‹å†Œ

## ä¸€ã€é¡¹ç›®ç»“æ„é€ŸæŸ¥

```
JunoYi/
â”œâ”€â”€ junoyi-dependencies      # ğŸ“¦ ä¾èµ–ç‰ˆæœ¬ç®¡ç†ï¼ˆæ‰€æœ‰ç‰ˆæœ¬åœ¨è¿™é‡Œç»Ÿä¸€æ§åˆ¶ï¼‰
â”œâ”€â”€ junoyi-common           # ğŸ”§ å…¬å…±å·¥å…·ï¼ˆå¸¸é‡ã€æšä¸¾ã€å·¥å…·ç±»ï¼‰
â”œâ”€â”€ junoyi-framework/       # ğŸ—ï¸ æ¡†æ¶å°è£…
â”‚   â”œâ”€â”€ framework-core      #    æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¼‚å¸¸å¤„ç†ã€ç»“æœå°è£…ï¼‰
â”‚   â””â”€â”€ framework-web       #    WebåŠŸèƒ½ï¼ˆå®‰å…¨ã€æ–‡æ¡£ã€è·¨åŸŸï¼‰
â”œâ”€â”€ junoyi-module-api/      # ğŸ“‹ åŠŸèƒ½æ¥å£å®šä¹‰
â”‚   â””â”€â”€ module-xxx-api/     #    å…·ä½“æ¨¡å—API
â”‚       â”œâ”€â”€ domain/         #    é¢†åŸŸå¯¹è±¡
â”‚       â”‚   â”œâ”€â”€ entity/     #    å®ä½“ç±»ï¼ˆæ•°æ®åº“æ˜ å°„ï¼‰
â”‚       â”‚   â”œâ”€â”€ vo/         #    è§†å›¾å¯¹è±¡ï¼ˆè¿”å›å‰ç«¯ï¼‰
â”‚       â”‚   â””â”€â”€ bo/         #    ä¸šåŠ¡å¯¹è±¡ï¼ˆä¸šåŠ¡ä¼ è¾“ï¼‰
â”‚       â”œâ”€â”€ service/        #    æœåŠ¡æ¥å£
â”‚       â””â”€â”€ mapper/         #    æ•°æ®è®¿é—®æ¥å£
â”œâ”€â”€ junoyi-module/          # ğŸ’¼ åŠŸèƒ½å®ç°
â”‚   â””â”€â”€ module-xxx/         #    å…·ä½“æ¨¡å—å®ç°
â”‚       â”œâ”€â”€ controller/     #    æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ service.impl/   #    æœåŠ¡å®ç°
â”‚       â””â”€â”€ convert/        #    å¯¹è±¡è½¬æ¢
â””â”€â”€ junoyi-server           # ğŸš€ å¯åŠ¨å…¥å£
```

---

## äºŒã€POM é…ç½®é€ŸæŸ¥

### æ ¹ pom.xml æ ¸å¿ƒé…ç½®

```xml
<properties>
    <revision>1.0.0</revision>  <!-- ç»Ÿä¸€ç‰ˆæœ¬å· -->
</properties>

<dependencyManagement>
    <dependencies>
        <!-- å¯¼å…¥ dependencies æ¨¡å— -->
        <dependency>
            <groupId>cn.junoyi</groupId>
            <artifactId>junoyi-dependencies</artifactId>
            <version>${revision}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### å­æ¨¡å— pom.xml æ¨¡æ¿

```xml
<parent>
    <groupId>cn.junoyi</groupId>
    <artifactId>çˆ¶æ¨¡å—å</artifactId>
    <version>${revision}</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<artifactId>å½“å‰æ¨¡å—å</artifactId>
<description>æ¨¡å—æè¿°</description>
```

### å¸¸ç”¨ä¾èµ–å¼•ç”¨

```xml
<dependencies>
    <!-- å…¬å…±æ¨¡å— -->
    <dependency>
        <groupId>cn.junoyi</groupId>
        <artifactId>junoyi-common</artifactId>
    </dependency>

    <!-- æ¡†æ¶æ ¸å¿ƒ -->
    <dependency>
        <groupId>cn.junoyi</groupId>
        <artifactId>junoyi-framework-core</artifactId>
    </dependency>

    <!-- æ¡†æ¶Web -->
    <dependency>
        <groupId>cn.junoyi</groupId>
        <artifactId>junoyi-framework-web</artifactId>
    </dependency>

    <!-- Spring Boot Web -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>

    <!-- MyBatis Plus -->
    <dependency>
        <groupId>com.baomidou</groupId>
        <artifactId>mybatis-plus-boot-starter</artifactId>
    </dependency>

    <!-- Lombok -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <scope>provided</scope>
    </dependency>
</dependencies>
```

---

## ä¸‰ã€Maven å‘½ä»¤é€ŸæŸ¥

```bash
# æ¸…ç†å¹¶å®‰è£…æ‰€æœ‰æ¨¡å—
mvn clean install

# è·³è¿‡æµ‹è¯•
mvn clean install -DskipTests

# åªç¼–è¯‘ä¸æ‰“åŒ…
mvn clean compile

# æ‰“åŒ…ï¼ˆä¼šè‡ªåŠ¨æ‰§è¡Œ compile å’Œ testï¼‰
mvn clean package

# è¿è¡Œ Spring Boot é¡¹ç›®
cd junoyi-server
mvn spring-boot:run

# æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree

# æŸ¥çœ‹æœ‰æ•ˆçš„ POMï¼ˆè§£æåçš„ï¼‰
mvn help:effective-pom

# æ›´æ–°ä¾èµ–
mvn clean install -U
```

---

## å››ã€åˆ›å»ºæ–°æ¨¡å—é€ŸæŸ¥

### 1. åˆ›å»º API æ¨¡å—

```bash
# 1. åˆ›å»ºç›®å½•
cd junoyi-module-api
mkdir junoyi-module-xxx-api

# 2. åˆ›å»º pom.xmlï¼ˆå‚è€ƒæ¨¡æ¿ï¼‰

# 3. åœ¨çˆ¶ pom.xml æ·»åŠ 
<modules>
    <module>junoyi-module-xxx-api</module>
</modules>

# 4. åœ¨ dependencies ä¸­æ³¨å†Œ
<dependency>
    <groupId>cn.junoyi</groupId>
    <artifactId>junoyi-module-xxx-api</artifactId>
    <version>${revision}</version>
</dependency>
```

### 2. åˆ›å»ºå®ç°æ¨¡å—

```bash
# 1. åˆ›å»ºç›®å½•
cd junoyi-module
mkdir junoyi-module-xxx

# 2. åˆ›å»º pom.xmlï¼ˆå‚è€ƒæ¨¡æ¿ï¼‰

# 3. åœ¨çˆ¶ pom.xml æ·»åŠ 
<modules>
    <module>junoyi-module-xxx</module>
</modules>

# 4. åœ¨ dependencies ä¸­æ³¨å†Œ
<dependency>
    <groupId>cn.junoyi</groupId>
    <artifactId>junoyi-module-xxx</artifactId>
    <version>${revision}</version>
</dependency>

# 5. åœ¨ server ä¸­å¼•å…¥
<dependency>
    <groupId>cn.junoyi</groupId>
    <artifactId>junoyi-module-xxx</artifactId>
</dependency>
```

---

## äº”ã€ä»£ç æ¨¡æ¿é€ŸæŸ¥

### Entity å®ä½“ç±»æ¨¡æ¿

```java
package cn.junoyi.module.xxx.api.domain.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;

@Data
@TableName("è¡¨å")
public class XxxEntity {
    
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String name;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
    
    @TableLogic
    private Integer deleted;
}
```

### VO è§†å›¾å¯¹è±¡æ¨¡æ¿

```java
package cn.junoyi.module.xxx.api.domain.vo;

import lombok.Data;
import java.time.LocalDateTime;

@Data
public class XxxVO {
    private Long id;
    private String name;
    private LocalDateTime createTime;
}
```

### Mapper æ¥å£æ¨¡æ¿

```java
package cn.junoyi.module.xxx.api.mapper;

import cn.junoyi.module.xxx.api.domain.entity.XxxEntity;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface XxxMapper extends BaseMapper<XxxEntity> {
}
```

### Service æ¥å£æ¨¡æ¿

```java
package cn.junoyi.module.xxx.api.service;

import cn.junoyi.module.xxx.api.domain.entity.XxxEntity;
import com.baomidou.mybatisplus.extension.service.IService;

public interface IXxxService extends IService<XxxEntity> {
}
```

### Service å®ç°æ¨¡æ¿

```java
package cn.junoyi.module.xxx.service.impl;

import cn.junoyi.module.xxx.api.domain.entity.XxxEntity;
import cn.junoyi.module.xxx.api.mapper.XxxMapper;
import cn.junoyi.module.xxx.api.service.IXxxService;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import org.springframework.stereotype.Service;

@Service
public class XxxServiceImpl extends ServiceImpl<XxxMapper, XxxEntity> 
        implements IXxxService {
}
```

### Controller æ¨¡æ¿

```java
package cn.junoyi.module.xxx.controller;

import cn.junoyi.module.xxx.api.service.IXxxService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/xxx")
public class XxxController {

    @Autowired
    private IXxxService xxxService;

    @GetMapping("/list")
    public Object list() {
        return xxxService.list();
    }

    @GetMapping("/{id}")
    public Object getById(@PathVariable Long id) {
        return xxxService.getById(id);
    }

    @PostMapping
    public Object save(@RequestBody Object entity) {
        return xxxService.save(entity);
    }

    @PutMapping
    public Object update(@RequestBody Object entity) {
        return xxxService.updateById(entity);
    }

    @DeleteMapping("/{id}")
    public Object delete(@PathVariable Long id) {
        return xxxService.removeById(id);
    }
}
```

### MapStruct è½¬æ¢å™¨æ¨¡æ¿

```java
package cn.junoyi.module.xxx.convert;

import cn.junoyi.module.xxx.api.domain.entity.XxxEntity;
import cn.junoyi.module.xxx.api.domain.vo.XxxVO;
import org.mapstruct.Mapper;
import org.mapstruct.factory.Mappers;
import java.util.List;

@Mapper
public interface XxxConvert {
    
    XxxConvert INSTANCE = Mappers.getMapper(XxxConvert.class);
    
    XxxVO toVO(XxxEntity entity);
    
    List<XxxVO> toVOList(List<XxxEntity> entities);
}
```

---

## å…­ã€ä¾èµ–å…³ç³»é€ŸæŸ¥

### å…è®¸çš„ä¾èµ–

```
âœ… module-xxx â†’ module-xxx-api
âœ… module-xxx â†’ framework-web
âœ… module-xxx â†’ common
âœ… module-xxx-api â†’ common
âœ… framework-web â†’ framework-core
âœ… framework-core â†’ common
âœ… server â†’ module-xxx
```

### ç¦æ­¢çš„ä¾èµ–

```
âŒ module-xxx-api â†’ framework-web
âŒ module-xxx-api â†’ module-xxx
âŒ module-a â†’ module-b (å®ç°æ¨¡å—äº’ç›¸ä¾èµ–)
âŒ common â†’ ä»»ä½•å†…éƒ¨æ¨¡å—
âŒ å¾ªç¯ä¾èµ–
```

---

## ä¸ƒã€ç‰ˆæœ¬ç®¡ç†é€ŸæŸ¥

### ä¿®æ”¹æ•´ä½“ç‰ˆæœ¬

```xml
<!-- åªéœ€ä¿®æ”¹æ ¹ pom.xml -->
<properties>
    <revision>1.1.0</revision>
</properties>
```

### æ·»åŠ æ–°çš„ç¬¬ä¸‰æ–¹ä¾èµ–

```xml
<!-- 1. åœ¨ junoyi-dependencies/pom.xml å®šä¹‰ç‰ˆæœ¬ -->
<properties>
    <æ–°ä¾èµ–.version>x.x.x</æ–°ä¾èµ–.version>
</properties>

<!-- 2. åœ¨ dependencyManagement ä¸­å£°æ˜ -->
<dependency>
    <groupId>xxx</groupId>
    <artifactId>xxx</artifactId>
    <version>${æ–°ä¾èµ–.version}</version>
</dependency>

<!-- 3. åœ¨éœ€è¦çš„æ¨¡å—ä¸­å¼•ç”¨ï¼ˆä¸å¸¦ç‰ˆæœ¬å·ï¼‰ -->
<dependency>
    <groupId>xxx</groupId>
    <artifactId>xxx</artifactId>
</dependency>
```

### å‡çº§ä¾èµ–ç‰ˆæœ¬

```xml
<!-- åªéœ€ä¿®æ”¹ junoyi-dependencies/pom.xml ä¸­çš„ç‰ˆæœ¬å· -->
<properties>
    <spring.boot.version>3.2.1</spring.boot.version>
</properties>
```

---

## å…«ã€åŒ…åè§„èŒƒé€ŸæŸ¥

```
cn.junoyi.common                    # å…¬å…±æ¨¡å—
cn.junoyi.framework.core            # æ¡†æ¶æ ¸å¿ƒ
cn.junoyi.framework.web             # æ¡†æ¶Web
cn.junoyi.module.xxx.api            # æ¨¡å—API
cn.junoyi.module.xxx                # æ¨¡å—å®ç°
```

---

## ä¹ã€å¸¸è§é—®é¢˜é€ŸæŸ¥

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| æ‰¾ä¸åˆ°ä¾èµ– | æœªåœ¨ dependencies ä¸­å£°æ˜ | åœ¨ junoyi-dependencies ä¸­æ·»åŠ  |
| ç‰ˆæœ¬å†²çª | å­æ¨¡å—ç¡¬ç¼–ç ç‰ˆæœ¬ | ç§»é™¤å­æ¨¡å—çš„ version æ ‡ç­¾ |
| å¾ªç¯ä¾èµ– | æ¨¡å—é—´å¾ªç¯å¼•ç”¨ | é€šè¿‡ API æ¨¡å—è§£è€¦ |
| æ„å»ºå¤±è´¥ | æ¨¡å—é¡ºåºé”™è¯¯ | æ£€æŸ¥ modules å£°æ˜é¡ºåº |
| ç±»æ‰¾ä¸åˆ° | æœªå®‰è£…åˆ°æœ¬åœ°ä»“åº“ | æ‰§è¡Œ mvn clean install |

---

## åã€å¼€å‘æ£€æŸ¥æ¸…å•

åˆ›å»ºæ–°æ¨¡å—æ—¶æ£€æŸ¥ï¼š

- [ ] åœ¨çˆ¶æ¨¡å— pom.xml ä¸­æ·»åŠ  `<module>` å£°æ˜
- [ ] åœ¨ junoyi-dependencies ä¸­æ·»åŠ ç‰ˆæœ¬ç®¡ç†
- [ ] parent æ­£ç¡®æŒ‡å‘çˆ¶æ¨¡å—
- [ ] relativePath è®¾ç½®ä¸º `../pom.xml`
- [ ] ä¸è¦ç¡¬ç¼–ç ç‰ˆæœ¬å·
- [ ] åŒ…åéµå¾ªè§„èŒƒ
- [ ] API æ¨¡å—åªå®šä¹‰æ¥å£
- [ ] å®ç°æ¨¡å—ä¾èµ–å¯¹åº” API

---

## åä¸€ã€æŠ€æœ¯æ ˆç‰ˆæœ¬

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|-----|------|------|
| Java | 21 | JDKç‰ˆæœ¬ |
| Spring Boot | 3.2.0 | æ¡†æ¶ç‰ˆæœ¬ |
| MyBatis Plus | 3.5.5 | ORMæ¡†æ¶ |
| MySQL | 8.0.33 | æ•°æ®åº“ |
| Druid | 1.2.20 | è¿æ¥æ±  |
| Lombok | 1.18.30 | ä»£ç ç®€åŒ– |
| Hutool | 5.8.23 | å·¥å…·ç±»åº“ |
| FastJson2 | 2.0.43 | JSONå¤„ç† |
| Knife4j | 4.3.0 | æ¥å£æ–‡æ¡£ |
| JWT | 0.12.3 | è®¤è¯ |
| MapStruct | 1.5.5.Final | å¯¹è±¡è½¬æ¢ |

---

**å¿«é€Ÿå‚è€ƒæ‰‹å†Œ - éšæ—¶æŸ¥é˜…ï¼Œé«˜æ•ˆå¼€å‘ï¼**
